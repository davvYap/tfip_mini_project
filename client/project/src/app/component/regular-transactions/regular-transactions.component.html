<div class="container">
  <p-breadcrumb
    class="max-w-full m-2"
    [model]="breadcrumbItems"
    [home]="breadcrumbHome"
  ></p-breadcrumb>
  <div class="row justify-content-center align-items-center">
    <div class="col-8 text-center my-3 h1card">
      <h1>Regular Transactions</h1>
    </div>
  </div>

  <div class="row justify-content-center align-items-center mt-3">
    <div class="col-12 custom-background">
      <p-table
        id="dt1"
        #dt1
        [value]="regularTransactions"
        [loading]="loading"
        [tableStyle]="{ 'min-width': '50rem' }"
        [globalFilterFields]="['symbol', 'name', 'quantity', 'date']"
        [paginator]="true"
        [rows]="5"
        [showCurrentPageReport]="true"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [rowsPerPageOptions]="[5, 10, 15, 50]"
      >
        <ng-template pTemplate="caption">
          <div class="d-flex flex-row-reverse align-items-center">
            <div>
              <button
                pButton
                label="Clear"
                class="p-button-outlined"
                icon="pi pi-filter-slash"
                (click)="clear(dt1)"
              ></button>
              <span class="p-input-icon-left ml-auto">
                <i class="pi pi-search"></i>
                <input
                  id="input1"
                  #input1
                  pInputText
                  type="text"
                  (input)="dt1.filterGlobal(input1.value, 'contains')"
                  placeholder="Search keyword"
                />
              </span>
            </div>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th style="width: 14.3%" pSortableColumn="date">
              Date <p-sortIcon field="date"></p-sortIcon>
            </th>
            <th style="width: 14.3%">Name</th>
            <th style="width: 14.3%" pSortableColumn="amount">
              Amount <p-sortIcon field="amount"></p-sortIcon>
            </th>
            <th style="width: 14.3%">Category</th>
            <th style="width: 14.3%">
              Type
              <p-columnFilter
                type="text"
                field="type"
                display="menu"
              ></p-columnFilter>
            </th>
            <th style="width: 14.3%">Remarks</th>
            <th style="width: 14.3%">Action</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-stock>
          <tr>
            <td>
              <span class="d-flex justify-content-evenly align-items-center">
                <p-avatar [image]="stock.logo" shape="circle"></p-avatar>
                <span>
                  <p-button
                    [label]="stock.symbol"
                    styleClass="p-button-text p-button-primary"
                    tooltipPosition="right"
                  >
                  </p-button>
                  <!-- {{ stock.symbol }} -->
                </span>
              </span>
            </td>
            <td>{{ stock.name }}</td>
            <td>{{ stock.date | date }}</td>
            <td>
              {{ stock.quantity }}
            </td>
            <td>{{ stock.price | currency }}</td>
            <td>{{ stock.marketPrice | currency }}</td>
            <td>
              {{ stock.percentage | percent : "1.2-2" }}
            </td>
            <td>
              <span class="me-2">
                <p-button
                  icon="pi pi-trash"
                  type="button"
                  styleClass="p-button-rounded p-button-danger"
                  (onClick)="deleteSelectedTransaction($event, stock)"
                ></p-button>
              </span>
            </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="paginatorleft">
          <p-button
            type="button"
            icon="pi pi-plus"
            styleClass="p-button-text"
            [routerLink]="'/investment'"
          ></p-button>
        </ng-template>
        <ng-template pTemplate="paginatorright">
          <p-button
            type="button"
            icon="pi pi-refresh"
            styleClass="p-button-text"
          ></p-button>
        </ng-template>
      </p-table>
    </div>
  </div>

  <p-toast></p-toast>
  <!-- SCROLL UP BTN -->
  <p-scrollTop></p-scrollTop>
</div>
